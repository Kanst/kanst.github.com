---
layout: post
title: Поиск файлов.
category : lessons
tags : [find, locate, search]
---
{% include JB/setup %}


__________________________________

Команда **find** имеет много критериев поиска. Формат команды выглядит следующим образом:
**find** *место_поиска критерии модификаторы*  
*Место_поиска* - каталог, начиная с которого будет осуществляться поиск, и подкаталоги. Критерии поиска указывают, что искать, а модификаторы - действия с найденными файлами. иже приведены наиболее часто используемые критерии:  

+	**-name** - поиск по имени файла.  
+	**-type** -  поиск по типу файла.  
+	**-iname** - поиск по имени с игнорированием регистра.  
+	**-size** - поиск по размеру или диапазону размеров.  
+	**-empty** - поиск пустых файлов.  
+	**-perm** - поиск по правам доступа.  
+	**-user/-group** - поиск по владельцу/группе.  
+	**-mtime** - поиск по дате последней модификации.  

Если в имени файла используется шаблон подстановки (\*), то такой шаблон должен быть заключен в кавычки. Например, нужно в текущем каталоге найти все файлы, имя которых начинается на *CN*:
	$ find . -name "CN*"
	./CNAME
	./server/CNAME
	./_site/CNAME
	./_site/server/CNAME

Для поиска по типу файлов (**type**) используют следующие аргументы:  

+	Обычный файл **"f"**.
+	Каталог **"d"**.
+	Файл символьного устройства **"с"**.
+	Файл блочного устройства **"b"**.
+	Локальный сокет **"s"**.
+	Именованный канал **"p"**.
+	Символическая ссылка **"l"**.

Если критерии поиска следует объединить по условию ИЛИ, то следует использовать **-о**. Например:  
	$ find . -name "se*" -type d -ls -o -empty -ls
	2754799    4 drwxrwxr-x   6 kanst9   kanst9       4096 июля 27 16:42 ./server
	2624921    4 drwxrwxr-x   2 kanst9   kanst9       4096 мая 18 18:50 ./.git/branches
	2888985    4 drwxrwxr-x   2 kanst9   kanst9       4096 мая 18 18:50 ./.git/objects/info
	2496238    4 drwxrwxr-x   2 kanst9   kanst9       4096 мая 18 18:50 ./.git/refs/tags
	2755202    4 drwxrwxr-x   6 kanst9   kanst9       4096 авг.  3 14:53 ./_site/server

В данном примере для подробного вывода был использован модификатор **-ls**, а поиск файлов производился по каталогам. Либо происходил поиск по пустым файлам (каталогам).

Для исполнения команд с найденными файлами используют модификатор **-exec**: 
	$ find . -name "se*" -exec rm -f {} \;

В данном примере происходит поиск и удаление файлов, содержащих в имени *se*. Фигурные скобки будут заменены найденными файлами, а *\;* показывает, что команды **rm** закончилась.

Команда **find** полезна при поиске жестких ссылок. Для поиска нужно выполнить команду **ls -i**, для поиска индексного дескриптора файла. Далее нужно выполнить команду **find** *место_поиска* **-xdev -inum** *индексный_дескриптор***-print**.

Для быстрого поиска файлов можно использовать команду **locate**. Эта команда производит поиск не по каталогам файловой системы, а в специально созданной базе имен файлов.