---
layout: post
title: TCP/IP
category : lessons
tags : [TCP/IP, OSI]
---
{% include JB/setup %}

__________________________________

**Немного истории.**  
Протоколы TCP/IP впервые были приняты в качестве военных стандартов США (MIL STD) в 1983 году, в связи с этим всем узлам сети было предписано перейти на новые протоколы. Чтобы облегчить этот переход, управление DAPRA финансировало реализацию TCP/IP для BSD.
В настоящее время сеть растет, удваиваясь с каждым годом примерно в 2 раза. Но это ни как не повлияло на то, что основным протоколом остаётся TSP/IP.

**Немного неведомой ## для понимания.**

Для описания структуры и функциональности протоколов обмена данными часто используется архитектурная модель, разработанная Международной организацией по стандартизации. Эта модель получила название OSI (Open System Interconnection).
<div align="center"><img src="/images/OSI.png"></div> 
*Рис. 1. Опорная модель OSI*

Выделяют 7 уровней:   

*	*Прикладной*. На этом уровне происходит взаимодействие пользователя с ПО.

+	*Уровень представления*. Производит преобразование из нижележащих уровней для прикладного уровня (стандартизирует представление данных в приложениях).

+	*Сеансовый уровень*. На этом уровне работаю программы, обеспечивающие аутентификацию, вход и выход из сеанса (с помощью "сокетов" и "портов"). Если кратко, то "порт"- некоторый нумерованный системный ресурс, который выделяется приложению для связи с другими приложения, возможно находящимися в разных узлах сети. "Сокет" - название программного интерфейса для обеспечения обмена данными между процессами, возможно находящимися в разных узлах сети.


+	*Транспортный уровень*. программы этого уровня обеспечивают приём/передачу необходимых данных с заданной надежностью ( обеспечивают обнаружение и корректировку ошибок при передаче/приёме).

+	*Сетевой уровень*. Определяет адреса сетей и узлов сетей для передачи данных (управляет сетевыми соединениями).

+	*Канальный уровень*. Обеспечивает передачу информации ( обеспечивает надежную доставку данных по физическому каналу).

+	*Физический уровень*. Обеспечивает передачу информации между носителем и сетевым обеспечением .

**Архитектура TCP/IP** 

Модель TCP/IP состоит из четырёх уровней:  
<div align="center"><img src="/images/Model-TCP.png"></div>  
*Рис. 2. Архитектура TCP/IP*

При передаче информации каждый уровень добавляет к данным собственную информацию ("заголовок"). Добавление к данным *заголовка* принято называть *инкапсуляцией*. Заголовки гарантируют корректную доставку данных.

При получении данных происходит обратный процесс - *декапсуляция*. Т.е. каждый уровень удаляет заголовок и передаёт данные вышестоящему уровню.

Рассмотрим более подробно каждый из уровней.  
<div align="center"><img src="/images/struktura-dannyih.png"></div>  
*Рис. 2. Представление данных*

+	*Уровень доступа к сети* определяет способы доставки *дейтаграмм* (дейтаграмма-данные в представлении уровня Internet). Данный уровень должен обладать подробными сведениями о структуре пакетов, системе адресации  и т.д., для корректной доставки данных. Уровень доступа к сети может включать в себя три последних уровня OSI (сетевой, канальный и физический).
Данный уровень включает в себя инкапсуляцию дейтаграмм и преобразование IP- адресов в физические адреса. 

+	Следующим уровнем является *Internet*. "Сердцем" данного уровня является протокол IP (Internet). Уровень Internet определяет доставку данных между сетями и узлами сетей.
(Более подробно про протокол Internet и дейтаграммы я расскажу в следующей статье).

+	Наиболее важными составляющими *транспортного уровня* являются протоколы UDP(User Datagram Protocol) и TCP(Transmission
Control Protocol). Оба протокола предназначены для доставки данных между прикладным уровнем и уровнем *Internet*. Но TCP обеспечивает надежную доставку данных с устранением ошибок, а протокол UDP- более быстрая, нетребовательная к ресурсам служба доставки дейтаграмм. 
	+ UDP- ненадежный (невозможно убедиться о корректном получении данных адресатом) протокол доставки дейтаграмм.
	<div align="center"><img src="/images/udp.gif"></div>  
	*Рис. 3. Формат сообщения UDP*  
	В основном протокол UDP применяют в приложениях, работающих по принципу *запрос-ответ*. В таких приложениях ответ пользователя можно считать подтверждение приёма. Также данный протокол можно использовать при передаче небольших объемов данных, т.к. при использовании протокола TCP время на установку контакта может быть больше времени на повторную пересылку данных.

	+  При помощи механизма PAR (Positive Acknowledgment with Retransmission) протокол TCP обеспечивает прием данных с возможностью подтверждения. Данных отправляются до тех пор, пока не будет получено подтверждение о том, что данные успешно получены. Перед началом передачи данных узлы обмениваются управляющей информацией, подтверждающей соединение. В протоколе TCP данные считаются непрерывным потоком байтов, а не набором пакетов. В этом случае важна последовательность передачи и получения данных (для этого в сегменте TCP используют поля *порядковый номер* и *номер подтверждения*).
	Каждый байт данных нумеруется последовательно, начиная с номера ISN (исходный порядковый номер).
	Поле сегмента *Окно* указывает на количество данных, которое может принять адресат.
	Кроме того, TCP отвечает за доставку полученных от IP данных соответствующему приложению. Приложение, которому предназначаются данные, обозначается номером порта. Для этого используются поля сегмента *Исходный порт* и *Целевой порт*

+	*Прикладной уровень* обеспечивает функционирование прикладного программного обеспечения. Перечислим наиболее известные протоколы: *Telnet* (обеспечивает работу с удаленными системами), *FTP* (обеспечивает передачу файлов в диалоговом режиме), *HTTP* (обеспечивает доставку веб-страниц), *SMTP* (обеспечивает доставку электронной почты), *DNS* (ассоциирует IP адреса с именами, назначенными в сети).



